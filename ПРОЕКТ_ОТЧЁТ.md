# ๐ ะะขะงะะข ะะ ะะะะะะขะฃ "ะะฝะปะฐะนะฝ ะะธะฑะปะธะพัะตะบะฐ"

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

ะัะพะตะบั ัะฐะทะดะตะปัะฝ ะฝะฐ 3 ะพัะฝะพะฒะฝัะต ัะฐััะธ, ะทะฐ ะบะฐะถะดัั ะธะท ะบะพัะพััั ะพัะฒะตัะฐะตั ะพัะดะตะปัะฝัะน ัะฐะทัะฐะฑะพััะธะบ:

---

# ๐ค ะะะะะะะะขะงะะ 1: CRUD ะะะะะะฆะะ

## ๐ ะัะฒะตัััะฒะตะฝะฝะพััั
ะะฐะทัะฐะฑะพััะธะบ ะพัะฒะตัะฐะตั ะทะฐ ะฒัะต ะพะฟะตัะฐัะธะธ ัะพะทะดะฐะฝะธั, ััะตะฝะธั, ะพะฑะฝะพะฒะปะตะฝะธั ะธ ัะดะฐะปะตะฝะธั ะบะฝะธะณ (CRUD).

---

## ๐ ะัะฟะพะปัะทัะตะผัะต ัะฐะนะปั

### 1. `src/main/java/com/example/library/model/Book.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะดะตะปั ะดะฐะฝะฝัั ะบะฝะธะณะธ (Entity ะบะปะฐัั)

**ะะฟะธัะฐะฝะธะต:** ะะฟัะตะดะตะปัะตั ััััะบัััั ัะฐะฑะปะธัั `book` ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั.

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
@Entity                    // ะกััะพะบะฐ 5: ะฃะบะฐะทัะฒะฐะตั, ััะพ ััะพ JPA Entity
@Table(name = "book")      // ะกััะพะบะฐ 6: ะะผั ัะฐะฑะปะธัั ะฒ ะะ
public class Book {
    @Id                    // ะกััะพะบะฐ 8: ะะตัะฒะธัะฝัะน ะบะปัั
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ะกััะพะบะฐ 9: ะะฒัะพะธะฝะบัะตะผะตะฝั ID
    private Long id;       // ะกััะพะบะฐ 10: ะฃะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั
    
    private String title;   // ะกััะพะบะฐ 12: ะะฐะทะฒะฐะฝะธะต ะบะฝะธะณะธ
    private String author; // ะกััะพะบะฐ 13: ะะฒัะพั
    private String genre; // ะกััะพะบะฐ 14: ะะฐะฝั
    @Column(name = "publication_year")  // ะกััะพะบะฐ 15: ะะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ะบะพะปะพะฝะบะธ (year - ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะฝะพะต ัะปะพะฒะพ)
    private Integer year; // ะกััะพะบะฐ 16: ะะพะด ะธะทะดะฐะฝะธั
    @Column(length = 2000) // ะกััะพะบะฐ 17: ะะฐะบัะธะผะฐะปัะฝะฐั ะดะปะธะฝะฐ ะพะฟะธัะฐะฝะธั
    private String description; // ะกััะพะบะฐ 18: ะะฟะธัะฐะฝะธะต ะบะฝะธะณะธ
```

**ะะพะฝััััะบัะพัั:**
- **ะกััะพะบะธ 20-21:** ะัััะพะน ะบะพะฝััััะบัะพั (ััะตะฑัะตััั JPA)
- **ะกััะพะบะธ 22-28:** ะะพะฝััััะบัะพั ั ะฟะฐัะฐะผะตััะฐะผะธ ะดะปั ัะพะทะดะฐะฝะธั ะฝะพะฒะพะน ะบะฝะธะณะธ

**Getters ะธ Setters (ัััะพะบะธ 30-47):**
- ะะพะทะฒะพะปััั ะฟะพะปััะฐัั ะธ ัััะฐะฝะฐะฒะปะธะฒะฐัั ะทะฝะฐัะตะฝะธั ะฟะพะปะตะน
- ะัะฟะพะปัะทััััั Spring ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ัะฒัะทัะฒะฐะฝะธั ะดะฐะฝะฝัั ะธะท ัะพัะผ

---

### 2. `src/main/java/com/example/library/repository/BookRepository.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฝัะตััะตะนั ะดะปั ัะฐะฑะพัั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั

**ะะฟะธัะฐะฝะธะต:** ะะฐััะธััะตั `JpaRepository`, ะฟัะตะดะพััะฐะฒะปัั ััะฐะฝะดะฐััะฝัะต ะผะตัะพะดั CRUD.

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
public interface BookRepository extends JpaRepository<Book, Long> {
    // ะกััะพะบะฐ 10: ะะฐัะปะตะดัะตั ะผะตัะพะดั:
    // - save(Book) - ัะพััะฐะฝะตะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต
    // - findById(Long) - ะฟะพะธัะบ ะฟะพ ID
    // - findAll() - ะฟะพะปััะตะฝะธะต ะฒัะตั ะทะฐะฟะธัะตะน
    // - deleteById(Long) - ัะดะฐะปะตะฝะธะต ะฟะพ ID
    // - count() - ะฟะพะดัััั ะทะฐะฟะธัะตะน
    
    List<Book> findByTitle(String title);  // ะกััะพะบะฐ 20: ะะพะธัะบ ะบะฝะธะณะธ ะฟะพ ะฝะฐะทะฒะฐะฝะธั
}
```

**ะะฐัะปะตะดัะตะผัะต ะผะตัะพะดั ะพั JpaRepository:**
- `save(Book book)` - ัะพะทะดะฐะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต
- `findById(Long id)` - ััะตะฝะธะต ะฟะพ ID
- `findAll()` - ััะตะฝะธะต ะฒัะตั
- `deleteById(Long id)` - ัะดะฐะปะตะฝะธะต
- `count()` - ะฟะพะดัััั ะทะฐะฟะธัะตะน

---

### 3. `src/main/java/com/example/library/controller/BookController.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะฝััะพะปะปะตั, ะพะฑัะฐะฑะฐััะฒะฐััะธะน HTTP-ะทะฐะฟัะพัั ะดะปั ะพะฟะตัะฐัะธะน ั ะบะฝะธะณะฐะผะธ

**ะะฟะธัะฐะฝะธะต:** ะกะพะดะตัะถะธั ะฒัะต ะผะตัะพะดั ะดะปั CRUD ะพะฟะตัะฐัะธะน.

---

## ๐ ะะะขะะะฌะะซะ ะะะะะะ CRUD ะะะะะะฆะะ

### โ CREATE (ะกะพะทะดะฐะฝะธะต) - ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะน ะบะฝะธะณะธ

**ะะตัะพะด:** `createForm()` - **ะกััะพะบะธ 47-51**

```java
@GetMapping("/books/new")                    // ะกััะพะบะฐ 47: GET ะทะฐะฟัะพั ะฝะฐ /books/new
public String createForm(Model model) {     // ะกััะพะบะฐ 48: ะะตัะพะด ะพัะพะฑัะฐะถะตะฝะธั ัะพัะผั
    model.addAttribute("book", new Book());  // ะกััะพะบะฐ 49: ะกะพะทะดะฐัั ะฟัััะพะน ะพะฑัะตะบั Book
    return "books/form";                     // ะกััะพะบะฐ 50: ะะพะทะฒัะฐัะฐะตั ัะฐะฑะปะพะฝ ัะพัะผั
}
```
**ะงัะพ ะดะตะปะฐะตั:**
- ะัะธ ะฟะตัะตัะพะดะต ะฝะฐ `/books/new` ัะพะทะดะฐัััั ะฟัััะฐั ัะพัะผะฐ
- ะ ะผะพะดะตะปั ะดะพะฑะฐะฒะปัะตััั ะฝะพะฒัะน ะพะฑัะตะบั `Book` ั ะฟััััะผะธ ะฟะพะปัะผะธ
- ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพัะผั ะดะปั ะฒะฒะพะดะฐ ะดะฐะฝะฝัั

**ะะตัะพะด:** `save()` - **ะกััะพะบะธ 53-72** (ะกะะะะะะะ ะ ะะะะะะะะะะ)

```java
@PostMapping("/books")  // ะกััะพะบะฐ 53: POST ะทะฐะฟัะพั ะฝะฐ /books (ะพัะฟัะฐะฒะบะฐ ัะพัะผั)
public String save(@ModelAttribute Book book, RedirectAttributes ra) {
    // ะกััะพะบะฐ 54: @ModelAttribute ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟะพะปะฝัะตั ะพะฑัะตะบั Book ะธะท ัะพัะผั
    
    // ะะะะะะะฆะะฏ (ัััะพะบะธ 56-63):
    if (book.getTitle() == null || book.getTitle().trim().isEmpty()) {
        ra.addFlashAttribute("error", "ะะฐะทะฒะฐะฝะธะต ะบะฝะธะณะธ ะพะฑัะทะฐัะตะปัะฝะพ");
        return "redirect:/books/new";  // ะะพะทะฒัะฐั ะฝะฐ ัะพัะผั ะฟัะธ ะพัะธะฑะบะต
    }
    if (book.getAuthor() == null || book.getAuthor().trim().isEmpty()) {
        ra.addFlashAttribute("error", "ะะฒัะพั ะบะฝะธะณะธ ะพะฑัะทะฐัะตะปะตะฝ");
        return "redirect:/books/new";
    }
    
    // ะกะะฅะะะะะะะ (ัััะพะบะฐ 65):
    repository.save(book);  // ะกะพััะฐะฝัะตั ะบะฝะธะณั ะฒ ะะ (ัะพะทะดะฐัั, ะตัะปะธ id=null, ะพะฑะฝะพะฒะปัะตั ะตัะปะธ id!=null)
    
    // ะฃะกะะะจะะะ ะกะะะะฉะะะะ (ัััะพะบะฐ 66):
    ra.addFlashAttribute("success", 
        book.getId() != null ? "ะะฝะธะณะฐ ะพะฑะฝะพะฒะปะตะฝะฐ" : "ะะฝะธะณะฐ ะดะพะฑะฐะฒะปะตะฝะฐ");
    
    return "redirect:/books";  // ะกััะพะบะฐ 67: ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัะฟะธัะพะบ ะบะฝะธะณ
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั ัะพะทะดะฐะฝะธะต:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟะพะปะฝัะตั ัะพัะผั ะฝะฐ `/books/new`
2. ะคะพัะผะฐ ะพัะฟัะฐะฒะปัะตััั POST ะทะฐะฟัะพัะพะผ ะฝะฐ `/books`
3. Spring ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ะพะฑัะตะบั `Book` ะธะท ะดะฐะฝะฝัั ัะพัะผั (`@ModelAttribute`)
4. ะัะพะฒะตััะตััั ะฒะฐะปะธะดะฝะพััั ะดะฐะฝะฝัั (ะฝะฐะทะฒะฐะฝะธะต ะธ ะฐะฒัะพั ะพะฑัะทะฐัะตะปัะฝั)
5. ะัะทัะฒะฐะตััั `repository.save(book)` - ะตัะปะธ `book.id == null`, ัะพะทะดะฐัััั ะฝะพะฒะฐั ะทะฐะฟะธัั
6. ะะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตััั ะฝะฐ ัะฟะธัะพะบ ะบะฝะธะณ ั ัะพะพะฑัะตะฝะธะตะผ ะพะฑ ััะฟะตัะต

---

### ๐ READ (ะงัะตะฝะธะต) - ะัะพัะผะพัั ะบะฝะธะณ

**ะะตัะพะด:** `list()` - **ะกััะพะบะธ 21-45** (ะกะะะกะะ ะะกะะฅ ะะะะ)

```java
@GetMapping({"/", "/books"})  // ะกััะพะบะฐ 21: GET ะทะฐะฟัะพั ะฝะฐ ะณะปะฐะฒะฝัั ะธะปะธ /books
public String list(@RequestParam(required = false) String search,
                   @RequestParam(required = false) String genre,
                   @RequestParam(required = false) Integer year,
                   Model model) {
    // ะกััะพะบะธ 22-25: ะะฐัะฐะผะตััั ะทะฐะฟัะพัะฐ (ะพะฟัะธะพะฝะฐะปัะฝัะต)
    
    // ะกััะพะบะฐ 35: ะงะขะะะะ ะะกะะฅ ะะะะ (ะตัะปะธ ะฝะตั ะฟะพะธัะบะฐ/ัะธะปัััะพะฒ):
    model.addAttribute("books", repository.findAll());
    // repository.findAll() - ััะฐะฝะดะฐััะฝัะน ะผะตัะพะด JpaRepository
    
    // ะกััะพะบะฐ 37: ะะะะกะงะะข ะะะะะงะะกะขะะ:
    model.addAttribute("totalBooks", repository.count());
    // repository.count() - ััะฐะฝะดะฐััะฝัะน ะผะตัะพะด JpaRepository
    
    return "books/list";  // ะกััะพะบะฐ 44: ะะพะทะฒัะฐัะฐะตั ัะฐะฑะปะพะฝ ัะฟะธัะบะฐ
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะะพะปััะฐะตั ะฒัะต ะบะฝะธะณะธ ะธะท ะะ ัะตัะตะท `repository.findAll()`
- ะะพะดััะธััะฒะฐะตั ะพะฑัะตะต ะบะพะปะธัะตััะฒะพ ัะตัะตะท `repository.count()`
- ะะตัะตะดะฐัั ะดะฐะฝะฝัะต ะฒ ัะฐะฑะปะพะฝ ะดะปั ะพัะพะฑัะฐะถะตะฝะธั

**ะะตัะพะด:** `view()` - **ะกััะพะบะธ 91-99** (ะะะะกะะะขะ ะะะะะ ะะะะะ)

```java
@GetMapping("/books/{id}")  // ะกััะพะบะฐ 91: GET ะทะฐะฟัะพั ะฝะฐ /books/1, /books/2 ะธ ั.ะด.
public String view(@PathVariable Long id, Model model) {
    // ะกััะพะบะฐ 92: @PathVariable ะธะทะฒะปะตะบะฐะตั id ะธะท URL
    
    Optional<Book> b = repository.findById(id);  // ะกััะพะบะฐ 93: ะะพะธัะบ ะบะฝะธะณะธ ะฟะพ ID
    // repository.findById(id) - ััะฐะฝะดะฐััะฝัะน ะผะตัะพะด JpaRepository
    
    if (b.isPresent()) {  // ะกััะพะบะฐ 94: ะัะพะฒะตัะบะฐ, ะฝะฐะนะดะตะฝะฐ ะปะธ ะบะฝะธะณะฐ
        model.addAttribute("book", b.get());  // ะกััะพะบะฐ 95: ะะพะฑะฐะฒะปะตะฝะธะต ะบะฝะธะณะธ ะฒ ะผะพะดะตะปั
        return "books/view";  // ะกััะพะบะฐ 96: ะะพะทะฒัะฐั ัะฐะฑะปะพะฝะฐ ะฟัะพัะผะพััะฐ
    }
    return "redirect:/books";  // ะกััะพะบะฐ 98: ะัะปะธ ะบะฝะธะณะฐ ะฝะต ะฝะฐะนะดะตะฝะฐ - ัะตะดะธัะตะบั ะฝะฐ ัะฟะธัะพะบ
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. ะะท URL ะธะทะฒะปะตะบะฐะตััั ID ะบะฝะธะณะธ (ะฝะฐะฟัะธะผะตั, `/books/5`)
2. ะัะทัะฒะฐะตััั `repository.findById(5)` ะดะปั ะฟะพะธัะบะฐ ะฒ ะะ
3. ะัะปะธ ะบะฝะธะณะฐ ะฝะฐะนะดะตะฝะฐ - ะพัะพะฑัะฐะถะฐะตััั ัััะฐะฝะธัะฐ ะฟัะพัะผะพััะฐ
4. ะัะปะธ ะฝะต ะฝะฐะนะดะตะฝะฐ - ะฟะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัะฟะธัะพะบ

---

### โ๏ธ UPDATE (ะะฑะฝะพะฒะปะตะฝะธะต) - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะบะฝะธะณะธ

**ะะตัะพะด:** `editForm()` - **ะกััะพะบะธ 74-82** (ะะขะะะะะะะะะ ะคะะะะซ ะะะะะะขะะะะะะะะฏ)

```java
@GetMapping("/books/{id}/edit")  // ะกััะพะบะฐ 74: GET ะทะฐะฟัะพั ะฝะฐ /books/1/edit
public String editForm(@PathVariable Long id, Model model) {
    // ะกััะพะบะฐ 75: @PathVariable ะธะทะฒะปะตะบะฐะตั id ะธะท URL
    
    Optional<Book> b = repository.findById(id);  // ะกััะพะบะฐ 76: ะะพะธัะบ ะบะฝะธะณะธ ะฟะพ ID
    
    if (b.isPresent()) {  // ะกััะพะบะฐ 77: ะัะพะฒะตัะบะฐ ะฝะฐะปะธัะธั ะบะฝะธะณะธ
        model.addAttribute("book", b.get());  // ะกััะพะบะฐ 78: ะะพะฑะฐะฒะปะตะฝะธะต ะฝะฐะนะดะตะฝะฝะพะน ะบะฝะธะณะธ ะฒ ะผะพะดะตะปั
        return "books/form";  // ะกััะพะบะฐ 79: ะะพะทะฒัะฐั ัะพะน ะถะต ัะพัะผั, ััะพ ะธ ะดะปั ัะพะทะดะฐะฝะธั
    }
    return "redirect:/books";  // ะกััะพะบะฐ 81: ะัะปะธ ะบะฝะธะณะฐ ะฝะต ะฝะฐะนะดะตะฝะฐ
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะะฐัะพะดะธั ะบะฝะธะณั ะฟะพ ID ะฒ ะะ
- ะะฐะฟะพะปะฝัะตั ัะพัะผั ะดะฐะฝะฝัะผะธ ััะพะน ะบะฝะธะณะธ
- ะัะฟะพะปัะทัะตั ัั ะถะต ัะพัะผั (`books/form`), ััะพ ะธ ะดะปั ัะพะทะดะฐะฝะธั

**ะะตัะพะด:** `save()` - **ะกััะพะบะธ 53-72** (ะกะะฅะะะะะะะ ะะะะะะะะะ)

```java
@PostMapping("/books")  // ะขะพั ะถะต ะผะตัะพะด, ััะพ ะธ ะดะปั ัะพะทะดะฐะฝะธั!
public String save(@ModelAttribute Book book, RedirectAttributes ra) {
    // ...
    
    repository.save(book);  // ะกััะพะบะฐ 65: ะัะปะธ book.id != null, ัะพ ะะะะะะะฏะะข ะทะฐะฟะธัั
    
    ra.addFlashAttribute("success", 
        book.getId() != null ? "ะะฝะธะณะฐ ะพะฑะฝะพะฒะปะตะฝะฐ" : "ะะฝะธะณะฐ ะดะพะฑะฐะฒะปะตะฝะฐ");
    // ะกััะพะบะฐ 66: ะะฟัะตะดะตะปัะตั, ัะพะทะดะฐะฝะธะต ััะพ ะธะปะธ ะพะฑะฝะพะฒะปะตะฝะธะต ะฟะพ ะฝะฐะปะธัะธั ID
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั ะพะฑะฝะพะฒะปะตะฝะธะต:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะตะดะฐะบัะธัะพะฒะฐัั" ะฝะฐ ะบะฝะธะณะต ั ID=5
2. ะัะบััะฒะฐะตััั ัะพัะผะฐ `/books/5/edit` ั ะทะฐะฟะพะปะฝะตะฝะฝัะผะธ ะดะฐะฝะฝัะผะธ
3. ะะพะปัะทะพะฒะฐัะตะปั ะธะทะผะตะฝัะตั ะดะฐะฝะฝัะต ะธ ะพัะฟัะฐะฒะปัะตั ัะพัะผั
4. ะคะพัะผะฐ ะพัะฟัะฐะฒะปัะตััั POST ะฝะฐ `/books` ั ะทะฐะฟะพะปะฝะตะฝะฝัะผ `book.id = 5`
5. `repository.save(book)` ะฒะธะดะธั, ััะพ `id != null`, ะธ **ะะะะะะะฏะะข** ัััะตััะฒััััั ะทะฐะฟะธัั
6. ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพะพะฑัะตะฝะธะต "ะะฝะธะณะฐ ะพะฑะฝะพะฒะปะตะฝะฐ"

**ะะฐะถะฝะพ:** ะะตัะพะด `save()` ัะฝะธะฒะตััะฐะปัะฝัะน - ะพะฝ ะธ ัะพะทะดะฐัั, ะธ ะพะฑะฝะพะฒะปัะตั ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะฝะฐะปะธัะธั ID!

---

### ๐๏ธ DELETE (ะฃะดะฐะปะตะฝะธะต) - ะฃะดะฐะปะตะฝะธะต ะบะฝะธะณะธ

**ะะตัะพะด:** `delete()` - **ะกััะพะบะธ 84-89**

```java
@PostMapping("/books/{id}/delete")  // ะกััะพะบะฐ 84: POST ะทะฐะฟัะพั ะฝะฐ /books/5/delete
public String delete(@PathVariable Long id, RedirectAttributes ra) {
    // ะกััะพะบะฐ 85: @PathVariable ะธะทะฒะปะตะบะฐะตั id ะธะท URL
    
    repository.deleteById(id);  // ะกััะพะบะฐ 86: ะฃะะะะะะะ ะบะฝะธะณะธ ะธะท ะะ
    // repository.deleteById(id) - ััะฐะฝะดะฐััะฝัะน ะผะตัะพะด JpaRepository
    
    ra.addFlashAttribute("success", "ะะฝะธะณะฐ ัะดะฐะปะตะฝะฐ");  // ะกััะพะบะฐ 87: ะกะพะพะฑัะตะฝะธะต ะพะฑ ััะฟะตัะต
    return "redirect:/books";  // ะกััะพะบะฐ 88: ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัะฟะธัะพะบ
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั ะบะฝะพะฟะบั "ะฃะดะฐะปะธัั" ะฝะฐ ะบะฝะธะณะต
2. ะัะฟัะฐะฒะปัะตััั POST ะทะฐะฟัะพั ะฝะฐ `/books/{id}/delete`
3. ะัะทัะฒะฐะตััั `repository.deleteById(id)` - ัะดะฐะปัะตั ะทะฐะฟะธัั ะธะท ะะ
4. ะะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตััั ะฝะฐ ัะฟะธัะพะบ ั ัะพะพะฑัะตะฝะธะตะผ "ะะฝะธะณะฐ ัะดะฐะปะตะฝะฐ"

**ะะตะทะพะฟะฐัะฝะพััั:** ะ HTML ัะพัะผะต ะตััั ะฟะพะดัะฒะตัะถะดะตะฝะธะต ัะตัะตะท `onclick="return confirm(...)"` ะฟะตัะตะด ะพัะฟัะฐะฒะบะพะน

---

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั CRUD ะพะฟะตัะฐัะธะน

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CREATE (ะกะพะทะดะฐะฝะธะต)                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. GET /books/new โ createForm()                        โ
โ    โ ะกะพะทะดะฐัั ะฟัััะพะน Book                                โ
โ    โ ะัะพะฑัะฐะถะฐะตั ัะพัะผั                                   โ
โ                                                          โ
โ 2. POST /books โ save()                                 โ
โ    โ ะะพะปััะฐะตั Book ะธะท ัะพัะผั                             โ
โ    โ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั                                   โ
โ    โ repository.save(book) [id=null] โ ะกะะะะะะข         โ
โ    โ ะะตะดะธัะตะบั ะฝะฐ /books                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    READ (ะงัะตะฝะธะต)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. GET /books โ list()                                  โ
โ    โ repository.findAll() โ ะะกะ ะะะะะ                   โ
โ    โ repository.count() โ ะะะะะงะะกะขะะ                      โ
โ    โ ะัะพะฑัะฐะถะฐะตั ัะฟะธัะพะบ                                  โ
โ                                                          โ
โ 2. GET /books/{id} โ view()                            โ
โ    โ repository.findById(id) โ ะะะะ ะะะะะ               โ
โ    โ ะัะพะฑัะฐะถะฐะตั ะดะตัะฐะปะธ                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    UPDATE (ะะฑะฝะพะฒะปะตะฝะธะต)                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. GET /books/{id}/edit โ editForm()                    โ
โ    โ repository.findById(id) โ ะะะฅะะะะข ะะะะะฃ           โ
โ    โ ะะฐะฟะพะปะฝัะตั ัะพัะผั ะดะฐะฝะฝัะผะธ                            โ
โ                                                          โ
โ 2. POST /books โ save()                                 โ
โ    โ ะะพะปััะฐะตั Book ะธะท ัะพัะผั (ั id!)                     โ
โ    โ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั                                   โ
โ    โ repository.save(book) [id!=null] โ ะะะะะะะฏะะข       โ
โ    โ ะะตะดะธัะตะบั ะฝะฐ /books                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DELETE (ะฃะดะฐะปะตะฝะธะต)                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. POST /books/{id}/delete โ delete()                    โ
โ    โ repository.deleteById(id) โ ะฃะะะะฏะะข                 โ
โ    โ ะะตะดะธัะตะบั ะฝะฐ /books                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ะัะพะณ ะฟะพ CRUD ะพะฟะตัะฐัะธัะผ

**ะคะฐะนะปั ัะฐะทัะฐะฑะพััะธะบะฐ 1:**
- โ `Book.java` - ะผะพะดะตะปั ะดะฐะฝะฝัั
- โ `BookRepository.java` - ะธะฝัะตััะตะนั ะะ
- โ `BookController.java` - ะพะฑัะฐะฑะพัะบะฐ HTTP ะทะฐะฟัะพัะพะฒ

**ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ะพะฟะตัะฐัะธะธ:**
- โ CREATE: `createForm()` + `save()` (ะบะพะณะดะฐ id=null)
- โ READ: `list()` + `view()`
- โ UPDATE: `editForm()` + `save()` (ะบะพะณะดะฐ id!=null)
- โ DELETE: `delete()`

---

# ๐ค ะะะะะะะะขะงะะ 2: ะะะะะกะขะะะฆะะฏ ะ ะะฃะขะะะขะะคะะะะฆะะฏ

## ๐ ะัะฒะตัััะฒะตะฝะฝะพััั
ะะฐะทัะฐะฑะพััะธะบ ะพัะฒะตัะฐะตั ะทะฐ ัะธััะตะผั ะฑะตะทะพะฟะฐัะฝะพััะธ: ัะตะณะธัััะฐัะธั ะฝะพะฒัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะฒัะพะด ะฒ ัะธััะตะผั ะธ ะทะฐัะธัั ัััะฐะฝะธั.

---

## ๐ ะัะฟะพะปัะทัะตะผัะต ัะฐะนะปั

### 1. `src/main/java/com/example/library/model/User.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะดะตะปั ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปั

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
@Entity                    // ะกััะพะบะฐ 5: JPA Entity
@Table(name = "users")     // ะกััะพะบะฐ 6: ะขะฐะฑะปะธัะฐ "users" ะฒ ะะ
public class User {
    @Id                    // ะกััะพะบะฐ 8: ะะตัะฒะธัะฝัะน ะบะปัั
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ะกััะพะบะฐ 9: ะะฒัะพะธะฝะบัะตะผะตะฝั
    private Long id;       // ะกััะพะบะฐ 10: ID ะฟะพะปัะทะพะฒะฐัะตะปั
    
    @Column(unique = true)  // ะกััะพะบะฐ 12: ะฃะฝะธะบะฐะปัะฝะพะต ะฟะพะปะต (ะฝะตะปัะทั ะดะฒะฐ ะพะดะธะฝะฐะบะพะฒัั username)
    private String username; // ะกััะพะบะฐ 13: ะะพะณะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั
    
    private String password; // ะกััะพะบะฐ 14: ะะฐัะพะปั (ะฑัะดะตั ะทะฐัะธััะพะฒะฐะฝ)
    private String role;     // ะกััะพะบะฐ 15: ะะพะปั (ROLE_USER, ROLE_ADMIN ะธ ั.ะด.)
}
```

**ะะฐะถะฝะพ:** ะะฐัะพะปั ััะฐะฝะธััั ะฒ ะทะฐัะธััะพะฒะฐะฝะฝะพะผ ะฒะธะดะต (BCrypt), ะฝะธะบะพะณะดะฐ ะฝะต ะฒ ะพัะบัััะพะผ!

---

### 2. `src/main/java/com/example/library/repository/UserRepository.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฝัะตััะตะนั ะดะปั ัะฐะฑะพัั ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะฒ ะะ

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByUsername(String username);  // ะกััะพะบะฐ 9: ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพ ะปะพะณะธะฝั
}
```

**ะะตัะพะดั:**
- `findByUsername(String)` - ะฟะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ะฒัะพะดะฐ
- ะะฐัะปะตะดัะตั `save()`, `findById()`, `findAll()` ะพั JpaRepository

---

### 3. `src/main/java/com/example/library/controller/AuthController.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะฝััะพะปะปะตั ะดะปั ัะตะณะธัััะฐัะธะธ ะธ ะฒัะพะดะฐ

---

## ๐ ะะะขะะะฌะะซะ ะะะะะะ ะะฃะขะะะขะะคะะะะฆะะ

### ๐ ะะะะะกะขะะะฆะะฏ (ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั)

**ะะตัะพะด:** `registerForm()` - **ะกััะพะบะธ 29-33** (ะะขะะะะะะะะะ ะคะะะะซ)

```java
@GetMapping("/register")  // ะกััะพะบะฐ 29: GET ะทะฐะฟัะพั ะฝะฐ /register
public String registerForm(Model model) {
    model.addAttribute("user", new User());  // ะกััะพะบะฐ 31: ะกะพะทะดะฐัั ะฟัััะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
    return "auth/register";  // ะกััะพะบะฐ 32: ะะพะทะฒัะฐัะฐะตั ัะพัะผั ัะตะณะธัััะฐัะธะธ
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะัะพะฑัะฐะถะฐะตั ัะพัะผั ัะตะณะธัััะฐัะธะธ
- ะกะพะทะดะฐัั ะฟัััะพะน ะพะฑัะตะบั `User` ะดะปั ะทะฐะฟะพะปะฝะตะฝะธั

**ะะตัะพะด:** `register()` - **ะกััะพะบะธ 35-56** (ะะะะะะะขะะ ะะะะะกะขะะะฆะะ)

```java
@PostMapping("/register")  // ะกััะพะบะฐ 35: POST ะทะฐะฟัะพั ะฟัะธ ะพัะฟัะฐะฒะบะต ัะพัะผั
public String register(@ModelAttribute User user, RedirectAttributes ra) {
    // ะกััะพะบะฐ 36: @ModelAttribute ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟะพะปะฝัะตั User ะธะท ัะพัะผั
    
    // ะะะะะะะฆะะฏ ะะะะะะ (ัััะพะบะธ 37-40):
    if (user.getUsername() == null || user.getUsername().trim().isEmpty()) {
        ra.addFlashAttribute("error", "ะะพะณะธะฝ ะพะฑัะทะฐัะตะปะตะฝ");
        return "redirect:/register";  // ะะพะทะฒัะฐั ะฝะฐ ัะพัะผั ะฟัะธ ะพัะธะฑะบะต
    }
    
    // ะะะะะะะฆะะฏ ะะะะะะฏ (ัััะพะบะธ 41-44):
    if (user.getPassword() == null || user.getPassword().trim().isEmpty()) {
        ra.addFlashAttribute("error", "ะะฐัะพะปั ะพะฑัะทะฐัะตะปะตะฝ");
        return "redirect:/register";
    }
    
    // ะะะะะะะะ ะฃะะะะะะฌะะะกะขะ (ัััะพะบะธ 46-49):
    if (userRepository.findByUsername(user.getUsername()).isPresent()) {
        ra.addFlashAttribute("error", "ะะพะปัะทะพะฒะฐัะตะปั ั ัะฐะบะธะผ ะปะพะณะธะฝะพะผ ัะถะต ัััะตััะฒัะตั");
        return "redirect:/register";
    }
    
    // ะจะะคะะะะะะะ ะะะะะะฏ (ัััะพะบะฐ 51):
    user.setPassword(passwordEncoder.encode(user.getPassword()));
    // passwordEncoder - BCryptPasswordEncoder, ัะธัััะตั ะฟะฐัะพะปั
    
    // ะฃะกะขะะะะะะ ะะะะ (ัััะพะบะฐ 52):
    user.setRole("ROLE_USER");  // ะะพ ัะผะพะปัะฐะฝะธั ะฒัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ - ROLE_USER
    
    // ะกะะฅะะะะะะะ ะ ะะ (ัััะพะบะฐ 53):
    userRepository.save(user);  // ะกะพััะฐะฝัะตั ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
    
    // ะฃะกะะะจะะะ ะกะะะะฉะะะะ (ัััะพะบะฐ 54):
    ra.addFlashAttribute("success", "ะะตะณะธัััะฐัะธั ััะฟะตัะฝะฐ! ะขะตะฟะตัั ะฒั ะผะพะถะตัะต ะฒะพะนัะธ.");
    
    return "redirect:/login";  // ะกััะพะบะฐ 55: ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัััะฐะฝะธัั ะฒัะพะดะฐ
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั ัะตะณะธัััะฐัะธั:**
1. ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟะพะปะฝัะตั ัะพัะผั ัะตะณะธัััะฐัะธะธ (ะปะพะณะธะฝ, ะฟะฐัะพะปั)
2. ะัะพะฒะตััะตััั, ััะพ ะปะพะณะธะฝ ะธ ะฟะฐัะพะปั ะฝะต ะฟััััะต
3. ะัะพะฒะตััะตััั, ััะพ ะฟะพะปัะทะพะฒะฐัะตะปั ั ัะฐะบะธะผ ะปะพะณะธะฝะพะผ ะฝะต ัััะตััะฒัะตั
4. ะะฐัะพะปั ัะธัััะตััั ัะตัะตะท BCrypt (ะฝะตะพะฑัะฐัะธะผะพะต ัะธััะพะฒะฐะฝะธะต)
5. ะฃััะฐะฝะฐะฒะปะธะฒะฐะตััั ัะพะปั `ROLE_USER`
6. ะะพะปัะทะพะฒะฐัะตะปั ัะพััะฐะฝัะตััั ะฒ ะะ
7. ะะตัะตะฝะฐะฟัะฐะฒะปะตะฝะธะต ะฝะฐ ัััะฐะฝะธัั ะฒัะพะดะฐ

**ะะตะทะพะฟะฐัะฝะพััั:**
- ะะฐัะพะปั ะฝะธะบะพะณะดะฐ ะฝะต ััะฐะฝะธััั ะฒ ะพัะบัััะพะผ ะฒะธะดะต
- BCrypt - ะพะดะฝะพััะพัะพะฝะฝะตะต ัะธััะพะฒะฐะฝะธะต (ะฝะตะฒะพะทะผะพะถะฝะพ ัะฐััะธััะพะฒะฐัั)
- ะฃะฝะธะบะฐะปัะฝะพััั ะปะพะณะธะฝะฐ ะณะฐัะฐะฝัะธััะตััั ะฝะฐ ััะพะฒะฝะต ะะ (`@Column(unique = true)`)

---

### ๐ ะะฅะะ ะ ะกะะกะขะะะฃ (ะััะตะฝัะธัะธะบะฐัะธั)

**ะะตัะพะด:** `login()` - **ะกััะพะบะธ 24-27** (ะะขะะะะะะะะะ ะคะะะะซ ะะฅะะะ)

```java
@GetMapping("/login")  // ะกััะพะบะฐ 24: GET ะทะฐะฟัะพั ะฝะฐ /login
public String login() {
    return "auth/login";  // ะกััะพะบะฐ 26: ะะพะทะฒัะฐัะฐะตั ัะพัะผั ะฒัะพะดะฐ
}
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะัะพะฑัะฐะถะฐะตั ัะพัะผั ะฒัะพะดะฐ
- ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดะฐ ะฒัะฟะพะปะฝัะตััั Spring Security ะฐะฒัะพะผะฐัะธัะตัะบะธ!

---

### ๐ก๏ธ ะะะะคะะะฃะะะฆะะฏ ะะะะะะะกะะะกะขะ

**ะคะฐะนะป:** `src/main/java/com/example/library/security/SecurityConfig.java`

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐัััะพะนะบะฐ Spring Security ะดะปั ะทะฐัะธัั ะฟัะธะปะพะถะตะฝะธั

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
@Configuration           // ะกััะพะบะฐ 13: ะะปะฐัั ะบะพะฝัะธะณััะฐัะธะธ Spring
@EnableWebSecurity      // ะกััะพะบะฐ 14: ะะบะปััะฐะตั Spring Security
public class SecurityConfig {
    
    // ะจะะคะะะะะะะ ะะะะะะะ (ัััะพะบะธ 23-26):
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();  // ะกััะพะบะฐ 25: BCrypt ะดะปั ัะธััะพะฒะฐะฝะธั
    }
    
    // ะะะะะะะะะ ะะฃะขะะะขะะคะะะะฆะะ (ัััะพะบะธ 28-34):
    @Bean
    public DaoAuthenticationProvider authenticationProvider() {
        DaoAuthenticationProvider auth = new DaoAuthenticationProvider();
        auth.setUserDetailsService(userDetailsService);  // ะกััะพะบะฐ 31: ะกะตัะฒะธั ะทะฐะณััะทะบะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
        auth.setPasswordEncoder(passwordEncoder());      // ะกััะพะบะฐ 32: ะจะธััะพะฒะฐะปััะธะบ ะฟะฐัะพะปะตะน
        return auth;
    }
    
    // ะะะกะขะะะะะ ะะะกะขะฃะะ (ัััะพะบะธ 36-54):
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authenticationProvider(authenticationProvider())  // ะกััะพะบะฐ 39: ะัะฟะพะปัะทัะตั ะฝะฐั ะฟัะพะฒะฐะนะดะตั
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/css/**", "/login", "/register").permitAll()  // ะกััะพะบะฐ 41: ะะฐะทัะตัะตะฝะพ ะฒัะตะผ
                .anyRequest().authenticated()  // ะกััะพะบะฐ 42: ะะกะ ะะกะขะะะฌะะซะ ััะตะฑััั ะฐะฒัะพัะธะทะฐัะธะธ
            )
            .formLogin(form -> form
                .loginPage("/login")           // ะกััะพะบะฐ 45: ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ
                .defaultSuccessUrl("/books", true)  // ะกััะพะบะฐ 46: ะะพัะปะต ะฒัะพะดะฐ โ /books
                .permitAll()                  // ะกััะพะบะฐ 47: ะะพัััะฟะฝะฐ ะฒัะตะผ
            )
            .logout(logout -> logout
                .logoutSuccessUrl("/login?logout").permitAll()  // ะกััะพะบะฐ 50: ะะพัะปะต ะฒััะพะดะฐ โ /login
            );
        
        return http.build();
    }
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั ะฑะตะทะพะฟะฐัะฝะพััั:**

1. **ะจะธััะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน (ัััะพะบะธ 23-26):**
   - BCryptPasswordEncoder ัะธัััะตั ะฟะฐัะพะปะธ ะฟัะธ ัะตะณะธัััะฐัะธะธ
   - ะกัะฐะฒะฝะธะฒะฐะตั ะทะฐัะธััะพะฒะฐะฝะฝัะต ะฟะฐัะพะปะธ ะฟัะธ ะฒัะพะดะต

2. **ะัะพะฒะฐะนะดะตั ะฐััะตะฝัะธัะธะบะฐัะธะธ (ัััะพะบะธ 28-34):**
   - `DaoAuthenticationProvider` - ะฟัะพะฒะตััะตั ะปะพะณะธะฝ/ะฟะฐัะพะปั
   - ะัะฟะพะปัะทัะตั `CustomUserDetailsService` ะดะปั ะทะฐะณััะทะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะท ะะ
   - ะัะฟะพะปัะทัะตั `PasswordEncoder` ะดะปั ะฟัะพะฒะตัะบะธ ะฟะฐัะพะปั

3. **ะัะฐะฒะธะปะฐ ะดะพัััะฟะฐ (ัััะพะบะธ 40-42):**
   - `/css/**`, `/login`, `/register` - ะดะพัััะฟะฝั ะฒัะตะผ (ะฑะตะท ะฐะฒัะพัะธะทะฐัะธะธ)
   - ะัะต ะพััะฐะปัะฝัะต ัััะฐะฝะธัั (`/books`, `/books/new` ะธ ั.ะด.) - ััะตะฑััั ะฒัะพะดะฐ

4. **ะคะพัะผะฐ ะฒัะพะดะฐ (ัััะพะบะธ 44-47):**
   - Spring Security ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑัะฐะฑะฐััะฒะฐะตั POST ะฝะฐ `/login`
   - ะะพัะปะต ััะฟะตัะฝะพะณะพ ะฒัะพะดะฐ ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ะฝะฐ `/books`

5. **ะััะพะด (ัััะพะบะธ 49-50):**
   - POST ะฝะฐ `/logout` ะฒััะพะดะธั ะธะท ัะธััะตะผั
   - ะะตัะตะฝะฐะฟัะฐะฒะปัะตั ะฝะฐ `/login?logout`

---

### ๐ค ะะะะะฃะะะ ะะะะฌะะะะะขะะะะ

**ะคะฐะนะป:** `src/main/java/com/example/library/service/CustomUserDetailsService.java`

**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฐะณััะถะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะท ะะ ะดะปั Spring Security

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
@Service  // ะกััะพะบะฐ 14: Spring Service
public class CustomUserDetailsService implements UserDetailsService {
    
    // ะะะะะฃะะะ ะะะะฌะะะะะขะะะฏ (ัััะพะบะธ 23-34):
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        // ะกััะพะบะฐ 24: ะะตัะพะด ะฒัะทัะฒะฐะตััั Spring Security ะฟัะธ ะฒัะพะดะต
        
        // ะะะะกะ ะ ะะ (ัััะพะบะธ 25-26):
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new UsernameNotFoundException("User not found"));
        // ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฝะฐะนะดะตะฝ - ะฒัะฑัะฐััะฒะฐะตััั ะธัะบะปััะตะฝะธะต
        
        // ะกะะะะะะะ ะะะะ (ัััะพะบะฐ 28):
        GrantedAuthority authority = new SimpleGrantedAuthority(user.getRole());
        // ะัะตะพะฑัะฐะทัะตั ัััะพะบั "ROLE_USER" ะฒ ะพะฑัะตะบั ัะพะปะธ
        
        // ะะะะะะะข ะะะฏ SPRING SECURITY (ัััะพะบะธ 29-33):
        return new org.springframework.security.core.userdetails.User(
                user.getUsername(),    // ะะพะณะธะฝ
                user.getPassword(),     // ะะฐัะธััะพะฒะฐะฝะฝัะน ะฟะฐัะพะปั
                Collections.singleton(authority)  // ะะพะปั ะฟะพะปัะทะพะฒะฐัะตะปั
        );
    }
}
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. ะัะธ ะฟะพะฟััะบะต ะฒัะพะดะฐ Spring Security ะฒัะทัะฒะฐะตั `loadUserByUsername(username)`
2. ะะตัะพะด ะธัะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะะ ะฟะพ ะปะพะณะธะฝั
3. ะัะปะธ ะฝะฐะนะดะตะฝ - ัะพะทะดะฐัั ะพะฑัะตะบั `UserDetails` ั ะปะพะณะธะฝะพะผ, ะฟะฐัะพะปะตะผ ะธ ัะพะปัั
4. Spring Security ััะฐะฒะฝะธะฒะฐะตั ะฒะฒะตะดัะฝะฝัะน ะฟะฐัะพะปั ั ะทะฐัะธััะพะฒะฐะฝะฝัะผ ะธะท ะะ
5. ะัะปะธ ัะพะฒะฟะฐะดะฐัั - ะฒัะพะด ััะฟะตัะตะฝ

---

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั ะฐััะตะฝัะธัะธะบะฐัะธะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  ะะะะะกะขะะะฆะะฏ                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. GET /register โ registerForm()                      โ
โ    โ ะัะพะฑัะฐะถะฐะตั ัะพัะผั ัะตะณะธัััะฐัะธะธ                       โ
โ                                                          โ
โ 2. POST /register โ register()                         โ
โ    โ ะะฐะปะธะดะฐัะธั ะปะพะณะธะฝะฐ ะธ ะฟะฐัะพะปั                          โ
โ    โ ะัะพะฒะตัะบะฐ ัะฝะธะบะฐะปัะฝะพััะธ ะปะพะณะธะฝะฐ                      โ
โ    โ passwordEncoder.encode(password) โ ะจะะคะะะะะะะ     โ
โ    โ user.setRole("ROLE_USER")                          โ
โ    โ userRepository.save(user) โ ะกะะฅะะะะะะะ ะ ะะ        โ
โ    โ ะะตะดะธัะตะบั ะฝะฐ /login                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะฅะะ ะ ะกะะกะขะะะฃ                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. GET /login โ login()                                 โ
โ    โ ะัะพะฑัะฐะถะฐะตั ัะพัะผั ะฒัะพะดะฐ                             โ
โ                                                          โ
โ 2. POST /login (ะพะฑัะฐะฑะฐััะฒะฐะตั Spring Security)           โ
โ    โ CustomUserDetailsService.loadUserByUsername()      โ
โ      โ ะัะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะะ                           โ
โ    โ DaoAuthenticationProvider                           โ
โ      โ ะกัะฐะฒะฝะธะฒะฐะตั ะฟะฐัะพะปะธ (BCrypt)                        โ
โ    โ ะัะปะธ ััะฟะตัะฝะพ โ ะะตะดะธัะตะบั ะฝะฐ /books                  โ
โ    โ ะัะปะธ ะพัะธะฑะบะฐ โ ะะพะทะฒัะฐั ะฝะฐ /login ั ะพัะธะฑะบะพะน          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ะะะฉะะขะ ะกะขะะะะะฆ (SecurityConfig)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ /css/**, /login, /register โ ะะะกะขะฃะะะซ ะะกะะ             โ
โ                                                          โ
โ /books, /books/new, /books/{id} โ ะขะะะะฃะฎะข ะะฅะะะ         โ
โ                                                          โ
โ ะัะปะธ ะฝะต ะฐะฒัะพัะธะทะพะฒะฐะฝ โ ะะฒัะพะผะฐัะธัะตัะบะธะน ัะตะดะธัะตะบั ะฝะฐ /loginโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ะัะพะณ ะฟะพ ะฐััะตะฝัะธัะธะบะฐัะธะธ

**ะคะฐะนะปั ัะฐะทัะฐะฑะพััะธะบะฐ 2:**
- โ `User.java` - ะผะพะดะตะปั ะฟะพะปัะทะพะฒะฐัะตะปั
- โ `UserRepository.java` - ะธะฝัะตััะตะนั ะะ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ `AuthController.java` - ัะตะณะธัััะฐัะธั ะธ ัะพัะผะฐ ะฒัะพะดะฐ
- โ `SecurityConfig.java` - ะฝะฐัััะพะนะบะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ
- โ `CustomUserDetailsService.java` - ะทะฐะณััะทะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะดะปั Spring Security

**ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ััะฝะบัะธะธ:**
- โ ะะตะณะธัััะฐัะธั ะฝะพะฒัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ ะัะพะด ะฒ ัะธััะตะผั (ะปะพะณะธะฝ/ะฟะฐัะพะปั)
- โ ะััะพะด ะธะท ัะธััะตะผั
- โ ะะฐัะธัะฐ ัััะฐะฝะธั (ััะตะฑัะตััั ะฐะฒัะพัะธะทะฐัะธั)
- โ ะจะธััะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน (BCrypt)
- โ ะัะพะฒะตัะบะฐ ัะฝะธะบะฐะปัะฝะพััะธ ะปะพะณะธะฝะฐ

---

# ๐ค ะะะะะะะะขะงะะ 3: ะคะะะฌะขะะะฆะะฏ ะ ะกะะะขะะะะะะ

## ๐ ะัะฒะตัััะฒะตะฝะฝะพััั
ะะฐะทัะฐะฑะพััะธะบ ะพัะฒะตัะฐะตั ะทะฐ ะฟะพะธัะบ ะบะฝะธะณ, ัะธะปัััะฐัะธั ะฟะพ ะถะฐะฝัั ะธ ะณะพะดั, ะฐ ัะฐะบะถะต ะทะฐ ะพัะพะฑัะฐะถะตะฝะธะต ัะตะทัะปััะฐัะพะฒ.

---

## ๐ ะัะฟะพะปัะทัะตะผัะต ัะฐะนะปั

### 1. `src/main/java/com/example/library/repository/BookRepository.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะตัะพะดั ะดะปั ะฟะพะธัะบะฐ ะธ ัะธะปัััะฐัะธะธ ะบะฝะธะณ

**ะะปััะตะฒัะต ัะฐััะธ ะบะพะดะฐ:**

```java
public interface BookRepository extends JpaRepository<Book, Long> {
    
    // ะะะะกะ ะะ ะะะะะะะะฎ, ะะะขะะะฃ ะะะ ะะะะะฃ (ัััะพะบะธ 11-12):
    @Query("SELECT b FROM Book b WHERE LOWER(b.title) LIKE LOWER(CONCAT('%', :query, '%')) OR LOWER(b.author) LIKE LOWER(CONCAT('%', :query, '%')) OR LOWER(b.genre) LIKE LOWER(CONCAT('%', :query, '%'))")
    List<Book> searchBooks(@Param("query") String query);
    
    // ะคะะะฌะขะะะฆะะฏ ะะ ะะะะะฃ ะ ะะะะฃ (ัััะพะบะธ 14-15):
    @Query("SELECT b FROM Book b WHERE (:genre IS NULL OR LOWER(b.genre) LIKE LOWER(CONCAT('%', :genre, '%'))) AND (:year IS NULL OR b.year = :year)")
    List<Book> filterBooks(@Param("genre") String genre, @Param("year") Integer year);
    
    // ะะะะฃะงะะะะ ะะกะะฅ ะะะะะะ (ัััะพะบะธ 17-18):
    @Query("SELECT DISTINCT b.genre FROM Book b WHERE b.genre IS NOT NULL ORDER BY b.genre")
    List<String> findAllGenres();
}
```

**ะะฐะทะฑะพั ะผะตัะพะดะพะฒ:**

1. **`searchBooks(String query)` - ะกััะพะบะธ 11-12:**
   - ะัะตั ะบะฝะธะณะธ, ะณะดะต ะฝะฐะทะฒะฐะฝะธะต, ะฐะฒัะพั ะะะ ะถะฐะฝั ัะพะดะตัะถะฐั ะทะฐะฟัะพั
   - `LOWER()` - ะดะตะปะฐะตั ะฟะพะธัะบ ะฑะตะท ััััะฐ ัะตะณะธัััะฐ
   - `LIKE CONCAT('%', :query, '%')` - ะฟะพะธัะบ ะฟะพ ัะฐััะธัะฝะพะผั ัะพะฒะฟะฐะดะตะฝะธั
   - ะัะธะผะตั: ะทะฐะฟัะพั "ัะพะปััะพะน" ะฝะฐะนะดัั "ะขะพะปััะพะน", "ะขะะะกะขะะ", "ัะพะปััะพะณะพ"

2. **`filterBooks(String genre, Integer year)` - ะกััะพะบะธ 14-15:**
   - ะคะธะปััััะตั ะบะฝะธะณะธ ะฟะพ ะถะฐะฝัั ะ/ะะะ ะณะพะดั
   - `:genre IS NULL OR ...` - ะตัะปะธ ะถะฐะฝั ะฝะต ัะบะฐะทะฐะฝ, ะธะณะฝะพัะธััะตััั
   - `:year IS NULL OR ...` - ะตัะปะธ ะณะพะด ะฝะต ัะบะฐะทะฐะฝ, ะธะณะฝะพัะธััะตััั
   - ะะพะถะฝะพ ัะธะปัััะพะฒะฐัั ัะพะปัะบะพ ะฟะพ ะถะฐะฝัั, ัะพะปัะบะพ ะฟะพ ะณะพะดั, ะธะปะธ ะฟะพ ะพะฑะพะธะผ

3. **`findAllGenres()` - ะกััะพะบะธ 17-18:**
   - ะะพะปััะฐะตั ะฒัะต ัะฝะธะบะฐะปัะฝัะต ะถะฐะฝัั ะธะท ะะ
   - `DISTINCT` - ัะฑะธัะฐะตั ะดัะฑะปะธะบะฐัั
   - `ORDER BY b.genre` - ัะพััะธััะตั ะฟะพ ะฐะปัะฐะฒะธัั
   - ะัะฟะพะปัะทัะตััั ะดะปั ะทะฐะฟะพะปะฝะตะฝะธั ะฒัะฟะฐะดะฐััะตะณะพ ัะฟะธัะบะฐ ัะธะปัััะพะฒ

---

### 2. `src/main/java/com/example/library/controller/BookController.java`
**ะะฐะทะฝะฐัะตะฝะธะต:** ะะฑัะฐะฑะพัะบะฐ ะทะฐะฟัะพัะพะฒ ะฟะพะธัะบะฐ ะธ ัะธะปัััะฐัะธะธ

**ะะตัะพะด:** `list()` - **ะกััะพะบะธ 21-45** (ะะกะะะะะะ ะะะขะะ ะก ะะะะกะะะ ะ ะคะะะฌะขะะะฆะะะ)

```java
@GetMapping({"/", "/books"})  // ะกััะพะบะฐ 21: GET ะทะฐะฟัะพั ะฝะฐ ะณะปะฐะฒะฝัั ะธะปะธ /books
public String list(@RequestParam(required = false) String search,
                   @RequestParam(required = false) String genre,
                   @RequestParam(required = false) Integer year,
                   Model model) {
    // ะกััะพะบะธ 22-25: ะะฐัะฐะผะตััั ะธะท URL (ะฝะฐะฟัะธะผะตั, /books?search=ัะพะปััะพะน&genre=ะะปะฐััะธะบะฐ)
    // required = false - ะฟะฐัะฐะผะตััั ะพะฟัะธะพะฝะฐะปัะฝัะต
    
    try {
        // ะะะะกะ ะะ ะขะะะกะขะฃ (ัััะพะบะธ 27-30):
        if (search != null && !search.trim().isEmpty()) {
            model.addAttribute("books", repository.searchBooks(search.trim()));
            // ะัะทัะฒะฐะตั ะผะตัะพะด searchBooks() ะธะท BookRepository
            model.addAttribute("searchQuery", search.trim());
            // ะกะพััะฐะฝัะตั ะทะฐะฟัะพั ะดะปั ะพัะพะฑัะฐะถะตะฝะธั ะฒ ัะฐะฑะปะพะฝะต
        }
        
        // ะคะะะฌะขะะะฆะะฏ ะะ ะะะะะฃ ะ ะะะะฃ (ัััะพะบะธ 30-34):
        else if (genre != null || year != null) {
            model.addAttribute("books", repository.filterBooks(genre, year));
            // ะัะทัะฒะฐะตั ะผะตัะพะด filterBooks() ะธะท BookRepository
            model.addAttribute("selectedGenre", genre);
            model.addAttribute("selectedYear", year);
            // ะกะพััะฐะฝัะตั ะฒัะฑัะฐะฝะฝัะต ัะธะปัััั ะดะปั ะพัะพะฑัะฐะถะตะฝะธั
        }
        
        // ะะกะ ะะะะะ (ะตัะปะธ ะฝะตั ะฟะพะธัะบะฐ ะธ ัะธะปัััะพะฒ) (ัััะพะบะฐ 35):
        else {
            model.addAttribute("books", repository.findAll());
            // ะะพะบะฐะทัะฒะฐะตั ะฒัะต ะบะฝะธะณะธ ะฑะตะท ัะธะปัััะฐัะธะธ
        }
        
        // ะะะฉะะฏ ะะะคะะะะะฆะะฏ (ัััะพะบะธ 37-38):
        model.addAttribute("totalBooks", repository.count());
        // ะะฑัะตะต ะบะพะปะธัะตััะฒะพ ะบะฝะธะณ ะฒ ะะ
        model.addAttribute("genres", repository.findAllGenres());
        // ะกะฟะธัะพะบ ะฒัะตั ะถะฐะฝัะพะฒ ะดะปั ะฒัะฟะฐะดะฐััะตะณะพ ัะฟะธัะบะฐ
        
    } catch (Exception e) {
        // ะะะะะะะขะะ ะะจะะะะ (ัััะพะบะธ 39-43):
        // ะัะปะธ ััะพ-ัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ (ะฝะฐะฟัะธะผะตั, ะะ ะฝะตะดะพัััะฟะฝะฐ)
        model.addAttribute("books", java.util.Collections.emptyList());
        model.addAttribute("totalBooks", 0L);
        model.addAttribute("genres", java.util.Collections.emptyList());
    }
    
    return "books/list";  // ะกััะพะบะฐ 44: ะะพะทะฒัะฐัะฐะตั ัะฐะฑะปะพะฝ ัะฟะธัะบะฐ
}
```

**ะะพะณะธะบะฐ ัะฐะฑะพัั:**

1. **ะัะธะพัะธัะตั ะพะฟะตัะฐัะธะน:**
   - ะัะปะธ ะตััั ะฟะฐัะฐะผะตัั `search` โ ะฒัะฟะพะปะฝัะตััั ะฟะพะธัะบ
   - ะัะปะธ ะฝะตั `search`, ะฝะพ ะตััั `genre` ะธะปะธ `year` โ ะฒัะฟะพะปะฝัะตััั ัะธะปัััะฐัะธั
   - ะัะปะธ ะฝะตั ะฝะธ ัะพะณะพ, ะฝะธ ะดััะณะพะณะพ โ ะฟะพะบะฐะทัะฒะฐัััั ะฒัะต ะบะฝะธะณะธ

2. **ะัะธะผะตัั URL:**
   - `/books?search=ัะพะปััะพะน` โ ะฟะพะธัะบ ะฟะพ ัะตะบััั "ัะพะปััะพะน"
   - `/books?genre=ะคะฐะฝัะฐััะธะบะฐ` โ ัะธะปััั ะฟะพ ะถะฐะฝัั
   - `/books?year=2020` โ ัะธะปััั ะฟะพ ะณะพะดั
   - `/books?genre=ะะปะฐััะธะบะฐ&year=1967` โ ัะธะปััั ะฟะพ ะถะฐะฝัั ะ ะณะพะดั
   - `/books` โ ะฒัะต ะบะฝะธะณะธ

3. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ:**
   - ะัะปะธ ะะ ะฝะตะดะพัััะฟะฝะฐ ะธะปะธ ะฟัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ
   - ะะพะทะฒัะฐัะฐะตััั ะฟัััะพะน ัะฟะธัะพะบ ะฒะผะตััะพ ะฟะฐะดะตะฝะธั ะฟัะธะปะพะถะตะฝะธั

---

## ๐ ะะะขะะะฌะะซะ ะะะะะะ ะคะะะฌะขะะะฆะะ ะ ะะะะกะะ

### ๐ ะะะะกะ ะะ ะขะะะกะขะฃ

**ะะตัะพะด ะฒ Repository:** `searchBooks(String query)` - **ะกััะพะบะธ 11-12**

**SQL ะทะฐะฟัะพั (JPQL):**
```sql
SELECT b FROM Book b 
WHERE LOWER(b.title) LIKE LOWER(CONCAT('%', :query, '%')) 
   OR LOWER(b.author) LIKE LOWER(CONCAT('%', :query, '%')) 
   OR LOWER(b.genre) LIKE LOWER(CONCAT('%', :query, '%'))
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. ะัะตะพะฑัะฐะทัะตั ะทะฐะฟัะพั ะธ ะฟะพะปั ะฒ ะฝะธะถะฝะธะน ัะตะณะธััั (`LOWER()`)
2. ะัะตั ัะพะฒะฟะฐะดะตะฝะธั ะฒ ัััั ะฟะพะปัั: ะฝะฐะทะฒะฐะฝะธะต, ะฐะฒัะพั, ะถะฐะฝั
3. `LIKE CONCAT('%', :query, '%')` ะพะทะฝะฐัะฐะตั "ัะพะดะตัะถะธั"
   - ะะฐะฟัะพั "ัะพะป" ะฝะฐะนะดัั "ะขะพะปััะพะน", "ัะพะปััะพะณะพ", "ะขะะะกะขะะ"
4. `OR` ะพะทะฝะฐัะฐะตั, ััะพ ะดะพััะฐัะพัะฝะพ ัะพะฒะฟะฐะดะตะฝะธั ะฒ ะปัะฑะพะผ ะฟะพะปะต

**ะัะธะผะตัั:**
- ะะฐะฟัะพั "ัะพะปััะพะน" โ ะฝะฐะนะดัั ะบะฝะธะณะธ ะฐะฒัะพัะฐ "ะขะพะปััะพะน"
- ะะฐะฟัะพั "ัะฐะฝัะฐััะธะบะฐ" โ ะฝะฐะนะดัั ะบะฝะธะณะธ ะถะฐะฝัะฐ "ะคะฐะฝัะฐััะธะบะฐ"
- ะะฐะฟัะพั "ะฒะพะนะฝะฐ" โ ะฝะฐะนะดัั ะบะฝะธะณะธ ั "ะฒะพะนะฝะฐ" ะฒ ะฝะฐะทะฒะฐะฝะธะธ

**ะัะทะพะฒ ะฒ ะบะพะฝััะพะปะปะตัะต:**
```java
// ะกััะพะบะฐ 28: BookController.list()
model.addAttribute("books", repository.searchBooks(search.trim()));
```

---

### ๐ฏ ะคะะะฌะขะะะฆะะฏ ะะ ะะะะะฃ ะ ะะะะฃ

**ะะตัะพะด ะฒ Repository:** `filterBooks(String genre, Integer year)` - **ะกััะพะบะธ 14-15**

**SQL ะทะฐะฟัะพั (JPQL):**
```sql
SELECT b FROM Book b 
WHERE (:genre IS NULL OR LOWER(b.genre) LIKE LOWER(CONCAT('%', :genre, '%'))) 
  AND (:year IS NULL OR b.year = :year)
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. **ะคะธะปััั ะฟะพ ะถะฐะฝัั:**
   - ะัะปะธ `genre` ะฝะต ัะบะฐะทะฐะฝ (`IS NULL`) โ ะธะณะฝะพัะธััะตััั
   - ะัะปะธ ัะบะฐะทะฐะฝ โ ะธัะตั ัะฐััะธัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต (ะบะฐะบ ะฒ ะฟะพะธัะบะต)
   - ะัะธะผะตั: "ัะฐะฝั" ะฝะฐะนะดัั "ะคะฐะฝัะฐััะธะบะฐ", "ะะฐััะฝะฐั ัะฐะฝัะฐััะธะบะฐ"

2. **ะคะธะปััั ะฟะพ ะณะพะดั:**
   - ะัะปะธ `year` ะฝะต ัะบะฐะทะฐะฝ (`IS NULL`) โ ะธะณะฝะพัะธััะตััั
   - ะัะปะธ ัะบะฐะทะฐะฝ โ ัะพัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต (`=`)
   - ะัะธะผะตั: `year=2020` ะฝะฐะนะดัั ัะพะปัะบะพ ะบะฝะธะณะธ 2020 ะณะพะดะฐ

3. **ะะพะผะฑะธะฝะฐัะธั:**
   - `AND` ะพะทะฝะฐัะฐะตั, ััะพ ะดะพะปะถะฝั ะฒัะฟะพะปะฝััััั ะพะฑะฐ ััะปะพะฒะธั
   - ะะพะถะฝะพ ัะบะฐะทะฐัั ัะพะปัะบะพ ะถะฐะฝั, ัะพะปัะบะพ ะณะพะด, ะธะปะธ ะพะฑะฐ

**ะัะธะผะตัั:**
- `/books?genre=ะคะฐะฝัะฐััะธะบะฐ` โ ะฒัะต ะบะฝะธะณะธ ะถะฐะฝัะฐ "ะคะฐะฝัะฐััะธะบะฐ"
- `/books?year=2020` โ ะฒัะต ะบะฝะธะณะธ 2020 ะณะพะดะฐ
- `/books?genre=ะะปะฐััะธะบะฐ&year=1967` โ ะบะปะฐััะธะบะฐ 1967 ะณะพะดะฐ

**ะัะทะพะฒ ะฒ ะบะพะฝััะพะปะปะตัะต:**
```java
// ะกััะพะบะฐ 31: BookController.list()
model.addAttribute("books", repository.filterBooks(genre, year));
```

---

### ๐ ะะะะฃะงะะะะ ะกะะะกะะ ะะะะะะ

**ะะตัะพะด ะฒ Repository:** `findAllGenres()` - **ะกััะพะบะธ 17-18**

**SQL ะทะฐะฟัะพั (JPQL):**
```sql
SELECT DISTINCT b.genre 
FROM Book b 
WHERE b.genre IS NOT NULL 
ORDER BY b.genre
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**
1. `DISTINCT` - ัะฑะธัะฐะตั ะดัะฑะปะธะบะฐัั (ะตัะปะธ 5 ะบะฝะธะณ ะถะฐะฝัะฐ "ะคะฐะฝัะฐััะธะบะฐ", ะฒะตัะฝัั ะพะดะธะฝ ัะฐะท)
2. `WHERE b.genre IS NOT NULL` - ะธัะบะปััะฐะตั ะบะฝะธะณะธ ะฑะตะท ะถะฐะฝัะฐ
3. `ORDER BY b.genre` - ัะพััะธััะตั ะฟะพ ะฐะปัะฐะฒะธัั

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะะฐะฟะพะปะฝัะตั ะฒัะฟะฐะดะฐััะธะน ัะฟะธัะพะบ ัะธะปัััะพะฒ ะฝะฐ ัััะฐะฝะธัะต
- ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะฒัะต ะดะพัััะฟะฝัะต ะถะฐะฝัั

**ะัะทะพะฒ ะฒ ะบะพะฝััะพะปะปะตัะต:**
```java
// ะกััะพะบะฐ 38: BookController.list()
model.addAttribute("genres", repository.findAllGenres());
```

---

## ๐ ะกัะตะผะฐ ัะฐะฑะพัั ัะธะปัััะฐัะธะธ ะธ ะฟะพะธัะบะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะะะกะ ะะ ะขะะะกะขะฃ                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ัะตะบัั ะฒ ะฟะพะปะต ะฟะพะธัะบะฐ              โ
โ    โ ะะฐะฟัะธะผะตั: "ัะพะปััะพะน"                                 โ
โ                                                          โ
โ 2. GET /books?search=ัะพะปััะพะน โ list()                    โ
โ    โ repository.searchBooks("ัะพะปััะพะน")                  โ
โ    โ ะัะตั ะฒ title, author, genre                        โ
โ    โ ะะพะทะฒัะฐัะฐะตั ัะฟะธัะพะบ ะฝะฐะนะดะตะฝะฝัั ะบะฝะธะณ                    โ
โ                                                          โ
โ 3. ะัะพะฑัะฐะถะฐะตั ัะตะทัะปััะฐัั ั ัะพะพะฑัะตะฝะธะตะผ                   โ
โ    "ะะฐะนะดะตะฝะพ ะบะฝะธะณ: X ะฟะพ ะทะฐะฟัะพัั 'ัะพะปััะพะน'"               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ะคะะะฌะขะะะฆะะฏ ะะ ะะะะะฃ ะ ะะะะฃ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ะถะฐะฝั ะธ/ะธะปะธ ะณะพะด                โ
โ    โ ะะฐะฟัะธะผะตั: ะถะฐะฝั="ะคะฐะฝัะฐััะธะบะฐ", ะณะพะด=2020              โ
โ                                                          โ
โ 2. GET /books?genre=ะคะฐะฝัะฐััะธะบะฐ&year=2020 โ list()       โ
โ    โ repository.filterBooks("ะคะฐะฝัะฐััะธะบะฐ", 2020)         โ
โ    โ ะคะธะปััััะตั ะฟะพ ะถะฐะฝัั (ัะฐััะธัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต)          โ
โ    โ ะคะธะปััััะตั ะฟะพ ะณะพะดั (ัะพัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต)               โ
โ    โ ะะพะทะฒัะฐัะฐะตั ะพััะธะปัััะพะฒะฐะฝะฝัะต ะบะฝะธะณะธ                   โ
โ                                                          โ
โ 3. ะัะพะฑัะฐะถะฐะตั ัะตะทัะปััะฐัั ั ัะพะพะฑัะตะฝะธะตะผ                     โ
โ    "ะะฐะนะดะตะฝะพ ะบะฝะธะณ: X ะฟะพ ะถะฐะฝัั 'ะคะฐะฝัะฐััะธะบะฐ' ะทะฐ 2020 ะณะพะด"  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              ะะะะฃะงะะะะ ะกะะะกะะ ะะะะะะ                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั /books                         โ
โ    โ repository.findAllGenres()                         โ
โ    โ ะะพะปััะฐะตั ะฒัะต ัะฝะธะบะฐะปัะฝัะต ะถะฐะฝัั ะธะท ะะ                โ
โ    โ ะกะพััะธััะตั ะฟะพ ะฐะปัะฐะฒะธัั                              โ
โ                                                          โ
โ 2. ะะฐะฟะพะปะฝัะตั ะฒัะฟะฐะดะฐััะธะน ัะฟะธัะพะบ ัะธะปัััะพะฒ                โ
โ    โ ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะฒัะต ะดะพัััะฟะฝัะต ะถะฐะฝัั             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ะัะพะณ ะฟะพ ัะธะปัััะฐัะธะธ ะธ ัะพััะธัะพะฒะบะต

**ะคะฐะนะปั ัะฐะทัะฐะฑะพััะธะบะฐ 3:**
- โ `BookRepository.java` - ะผะตัะพะดั ะฟะพะธัะบะฐ ะธ ัะธะปัััะฐัะธะธ (ัััะพะบะธ 11-18)
- โ `BookController.java` - ะผะตัะพะด `list()` (ัััะพะบะธ 21-45)

**ะะตะฐะปะธะทะพะฒะฐะฝะฝัะต ััะฝะบัะธะธ:**
- โ ะะพะธัะบ ะฟะพ ะฝะฐะทะฒะฐะฝะธั, ะฐะฒัะพัั ะธะปะธ ะถะฐะฝัั (ะฑะตะท ััััะฐ ัะตะณะธัััะฐ)
- โ ะคะธะปัััะฐัะธั ะฟะพ ะถะฐะฝัั (ัะฐััะธัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต)
- โ ะคะธะปัััะฐัะธั ะฟะพ ะณะพะดั (ัะพัะฝะพะต ัะพะฒะฟะฐะดะตะฝะธะต)
- โ ะะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะฐั ัะธะปัััะฐัะธั (ะถะฐะฝั + ะณะพะด)
- โ ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะฒัะตั ะถะฐะฝัะพะฒ ะดะปั ัะธะปัััะพะฒ
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ ะะ

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะะพะธัะบ ะธะผะตะตั ะฟัะธะพัะธัะตั ะฝะฐะด ัะธะปัััะฐัะธะตะน
- ะคะธะปัััั ะผะพะถะฝะพ ะบะพะผะฑะธะฝะธัะพะฒะฐัั
- ะัะต ะพะฟะตัะฐัะธะธ ัะฐะฑะพัะฐัั ะฑะตะท ััััะฐ ัะตะณะธัััะฐ
- ะะตะทัะปััะฐัั ะพัะพะฑัะฐะถะฐัััั ั ะธะฝัะพัะผะฐัะธะฒะฝัะผะธ ัะพะพะฑัะตะฝะธัะผะธ

---

# ๐ ะะะฉะะฏ ะกะขะะฃะะขะฃะะ ะะะะะะขะ

## ๐๏ธ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
src/main/java/com/example/library/
โโโ model/
โ   โโโ Book.java          (ะะฐะทัะฐะฑะพััะธะบ 1: CRUD)
โ   โโโ User.java          (ะะฐะทัะฐะฑะพััะธะบ 2: ะััะตะฝัะธัะธะบะฐัะธั)
โโโ repository/
โ   โโโ BookRepository.java (ะะฐะทัะฐะฑะพััะธะบ 1: CRUD + ะะฐะทัะฐะฑะพััะธะบ 3: ะะพะธัะบ/ะคะธะปัััั)
โ   โโโ UserRepository.java (ะะฐะทัะฐะฑะพััะธะบ 2: ะััะตะฝัะธัะธะบะฐัะธั)
โโโ controller/
โ   โโโ BookController.java  (ะะฐะทัะฐะฑะพััะธะบ 1: CRUD + ะะฐะทัะฐะฑะพััะธะบ 3: ะะพะธัะบ/ะคะธะปัััั)
โ   โโโ AuthController.java (ะะฐะทัะฐะฑะพััะธะบ 2: ะััะตะฝัะธัะธะบะฐัะธั)
โโโ security/
โ   โโโ SecurityConfig.java (ะะฐะทัะฐะฑะพััะธะบ 2: ะััะตะฝัะธัะธะบะฐัะธั)
โโโ service/
โ   โโโ CustomUserDetailsService.java (ะะฐะทัะฐะฑะพััะธะบ 2: ะััะตะฝัะธัะธะบะฐัะธั)
โโโ DataInitializer.java   (ะะฝะธัะธะฐะปะธะทะฐัะธั ัะตััะพะฒัั ะดะฐะฝะฝัั)
```

---

## ๐ ะะทะฐะธะผะพะดะตะนััะฒะธะต ะผะตะถะดั ัะฐัััะผะธ

1. **ะะฐะทัะฐะฑะพััะธะบ 1 (CRUD)** ะธัะฟะพะปัะทัะตั:
   - `Book.java` - ะผะพะดะตะปั
   - `BookRepository.java` - ะฑะฐะทะพะฒัะต ะผะตัะพะดั (save, findById, findAll, deleteById)
   - `BookController.java` - ะผะตัะพะดั createForm, save, editForm, view, delete

2. **ะะฐะทัะฐะฑะพััะธะบ 2 (ะััะตะฝัะธัะธะบะฐัะธั)** ะธัะฟะพะปัะทัะตั:
   - `User.java` - ะผะพะดะตะปั ะฟะพะปัะทะพะฒะฐัะตะปั
   - `UserRepository.java` - ะฟะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
   - `AuthController.java` - ัะตะณะธัััะฐัะธั
   - `SecurityConfig.java` - ะฝะฐัััะพะนะบะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ
   - `CustomUserDetailsService.java` - ะทะฐะณััะทะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

3. **ะะฐะทัะฐะฑะพััะธะบ 3 (ะะพะธัะบ/ะคะธะปัััั)** ะธัะฟะพะปัะทัะตั:
   - `BookRepository.java` - ะผะตัะพะดั searchBooks, filterBooks, findAllGenres
   - `BookController.java` - ะผะตัะพะด list() ั ะปะพะณะธะบะพะน ะฟะพะธัะบะฐ ะธ ัะธะปัััะฐัะธะธ

---

## โ ะัะพะณะพะฒัะน ัะตะบะปะธัั ะฟัะพะตะบัะฐ

### ะะฐะทัะฐะฑะพััะธะบ 1 (CRUD):
- โ CREATE: `createForm()` + `save()` (id=null)
- โ READ: `list()` + `view()`
- โ UPDATE: `editForm()` + `save()` (id!=null)
- โ DELETE: `delete()`

### ะะฐะทัะฐะฑะพััะธะบ 2 (ะััะตะฝัะธัะธะบะฐัะธั):
- โ ะะตะณะธัััะฐัะธั: `registerForm()` + `register()`
- โ ะัะพะด: `login()` + Spring Security
- โ ะััะพะด: Spring Security logout
- โ ะะฐัะธัะฐ ัััะฐะฝะธั: `SecurityConfig`
- โ ะจะธััะพะฒะฐะฝะธะต ะฟะฐัะพะปะตะน: BCrypt

### ะะฐะทัะฐะฑะพััะธะบ 3 (ะะพะธัะบ/ะคะธะปัััั):
- โ ะะพะธัะบ ะฟะพ ัะตะบััั: `searchBooks()`
- โ ะคะธะปััั ะฟะพ ะถะฐะฝัั: `filterBooks(genre, null)`
- โ ะคะธะปััั ะฟะพ ะณะพะดั: `filterBooks(null, year)`
- โ ะะพะผะฑะธะฝะธัะพะฒะฐะฝะฝัะน ัะธะปััั: `filterBooks(genre, year)`
- โ ะกะฟะธัะพะบ ะถะฐะฝัะพะฒ: `findAllGenres()`

---

**ะะพะฝะตั ะพััััะฐ**

